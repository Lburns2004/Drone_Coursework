{"chunks": [{"type": "pdf", "chunk_number": 1, "pages": [{"page_number": 1, "text": " Exerci \nRevision 02 \u2013 02.04.2023 \nMECH1010: Computing For Engineers \nLab #1.1: Circuit Training \nMech1010 Coursework \u2013 MCU Systems  \nGlobal Health Drone: Autopilot Controller  \n \nINTRODUCTION  \nGlobal Health Drone is designed to travel across large landscapes in remote and \nresource-limited parts of the world \u2013 areas where traditional healthcare systems \nstruggle to provide assistance, particularly during emergencies. \nThe drone\u2019s job is to search across large landscapes, locating potentially injured \nperson(s) via camera systems and then use a thermal imaging system to scan and \nprovide vital medical feedback to medics who can assess and come to help... \n \nSo your task is to program a balance control system for the drone which holds it in \na stable horizontal position while the system performs a thermal scan.... \n \n \nPlease read this coursework guide carefully for full instructions, including  \nyour objectives, technical background and a mark scheme. Over and Out. \n  \nYou\n\u2022Lab Notes\n\u2022Practice\nSimulation\n\u2022Testbed for code\n\u2022Unlimited attempts\nReLOAD\n\u2022Real Hardware\n\u202250 Attempts!"}, {"page_number": 2, "text": " \n \n \n MECH1010: Computing For Engineers   P2 \nAIM AND OBJECTIVES  \nThe aim is to develop a balance control system which moves your drone to a stable horizontal \nposition and holds it there for 5 seconds while it performs a thermal scan... \nAPPROACH  \nDrones are expensive... so you will need to develop your code carefully in two stages using: \n1. A drone simulation (in WokWi): develop your code until it is functional and error free ... \n2. The ReLOAD drone model: now test your code on a real system and tune the controller \n \nIMPORTANT: You are limited to 50 test runs on the ReLOAD system! \n \n(This represents industry practice \u2013 testing on hardware is costly ... only attempted when you have a system \nyou are confident will work effectively! \nOBJECTIVES  \n1. Produce a Flow Chart of your program from the Specification (see Page 4) \n2. Write an Arduino drone controller program (based on your Flow Chart) which: \na. Initialises your system hardware \nb. Implements a closed-loop controller to reach and maintain a horizontal position \ni. Your controller should run at 25Hz \nii. As a minimum you should implement a Proportional controller \nc. Lights LEDs to indicate (System start, Reached Target Angle (Scanning Start), Scanning complete \nd. Sends flight telemetry data via Serial \u2013 see Page 4 for the detail \ne. Use good programming practice to produce a well-structured and understandable program \nf. Use functions to implement \ni. Sensor measurement \nii. The controller  \niii. Other functions of your choice... \n3. Collect and submit evidence from ReLOAD of your system in action (see Deliverables, Page 6) \na. Your flow-chart (1 side of A4) \nb. Your program \nc. ReLOAD outputs (.CSV and Video file) \n \n  \n"}, {"page_number": 3, "text": " \n \n \n MECH1010: Computing For Engineers   P3 \nSYSTEM DESCRIPTION  \nYou will develop your controller using the model drone system shown in Figure 1. \nThe drone is represented by a beam, pivoting at the middle, with a motor-driven propeller at each \nend. The beam is free to rotate about the pivot, simulating the drone moving in the air. Your Arduino \ncontroller is connected to: \n1) A potentiometer which can be used to measure the angle of the drone (relative to ground). \n2) Two H-Bridge motor controllers, each linked to a high-power DC motor and power supply \n \n \nFigure 1. Configuration of the model helicopter system \nHARDWARE  \nThe hardware in the drone model is described here. You will need to use this to configure your Arduino system \ncorrectly, and to calibrate your sensor measurement. \n \nItem Information \nH-Bridge Controllers + Motors \n \nNOTE: \nYou will control these motors using code provided in the \ntemplate (See WOKWI Simulator Section)  like this: \n \nmotor_Left.write(60); \nmotor_Right.write(85); \n \nThe control signal for each motor ranges from: \n45 = Motor Off \n85 = Full Power \nA commercial H-Bridge controller. \nThis takes a 9-24V supply \n \nLeft Motor Controller \nControl = Pin 10  \n \nRight Motor Controller \nControl = Pin 9  \n \nDirection = Both Left and Right are Fixed to positive thrust \n \nPotentiometer \nFor calibration, we took the following measurements:  \nVpot Angle \n552 0 \n729 -22 \n371 22 \n  \nThe potentiometer output voltage will change linearly as a \nfunction of the angle \uf071 shown in Figure 1. \n \nThe output Vpot can be measured using Arduino Pin A0 \nOutput LEDS \n \n \nUse these LEDs to signify the status of the control system.  \nStart-up LED (Green) = Pin 2 \nScanning LED (Yellow) = Pin 3 \nScan End LED (Red) = Pin 4 \n \nTable 1: Equipment specification for the model helicopter \n  \n\uf071\nDC motor\n(left)\nH-Bridge Arduino\nPotentiometer\nVpot\nHorizon \n(\uf071=0\uf0b0)\nH-Bridge DC motor\n(right)"}, {"page_number": 4, "text": " \n \n \n MECH1010: Computing For Engineers   P4 \nSP ECIFICATION  \nYour balance controller should be written to go through the following process \u2013 please read this carefully! \nYou will need to convert this into a Flow Chart as part of your submission  \n \nThe process is defined by a series of numbered stages. Each stage requires you to perform some tasks which are detailed.  \n \n1. As your control program starts it must initialise the system. Setup your Serial communication so you can send \nmessages. Configure your hardware connections to the sensor and motors. Initialise the motors by sending a 0 (zero) \nsignal to the LEFT and RIGHT motors.  \n2. Show that your balance controller (the programme you write) has started by lighting the Start-up LED for 1 second \n3. Your controller should now start. It should run continuously at 25Hz. \na. The controller first reads the angle sensor to determine the current angular position of the drone \nb. Now your controller should calculate a motor control signal \nc. Convert the motor control signal into control signals for the LEFT and RIGHT motors \nd. Send telemetry information using Serial communications \ne. Check if you moved within 5 degrees of the target angle (e.g. horizontal) \ni. Yes? Start your `Scan Timer` and Light the Scanning LED  \nii. Once Scanning has started \u2013 it must continue regardless of the drone angle \nf. Continue the controller until your Scan Timer reaches 5 seconds \n4. Shutdown: Light the Shutdown LED for 1 second and turn-off the motors \n \nAUTO -PILOT BLACKBOX DATAFILE  \nAs your program runs it should generate a BlackBox datafile - formatted in the same way as the example below but with your \nown data.  \n \nThis must be submitted as part of your coursework to demonstrate that your program runs and how well it performs! \n \n(Note the ... just indicates lots more data!) \n \n \n \n \n \n \n \n \n \n \nUNITS: Please ensure you report your data in the following format \nTime   seconds  2 decimal places \nCurrent Angle  degrees  2 decimal places \nError    degrees  2 decimal places \nControl Signal n/a \nMotor L  0-100 percentage activation \nMotor R  0-100 percentage activation \n \nExample data that should be printed to Serial as your program runs.  \nNote: the numeric values are only examples \u2013 yours should use the actual values you record! \n \n0.System Started \n1.System Initiated \n2.Controller Starting \nTime,Angle,Error,Control Signal,Motor L, Motor R \n0.00,0.3,0.15,45,55,45 \n0.02,0.29,0.14,41,65,50 \n..... \n8.00,0.151,0.01,10,70,20 \n4. Shutdown "}, {"page_number": 5, "text": " \n \n \n MECH1010: Computing For Engineers   P5 \nTHE CLOSED LOOP CONTROLLER  \nCONTROLLER TYPE  \nYour program should implement a closed-loop controller.  \nThe basic version you should attempt is a Proportional Controller \u2013 see lecture notes/slides \n \nFor additional marks you can implement a more advanced PID controller \u2013 see links below \nThis must be made clear in your code comments! \nCONVERTING YOUR CONTROL SIGNAL INTO MOTOR SIGNALS  \nYour controller will generate a control signal that must be used to drive your two drone motors and so control rotati on. \nEach motor can only produce positive thrust \u2013 you control the amount of thrust using a control signal to the motor (see notes) \n \nImportant: A suggested method for converting the control signal into two seperate signals to drive the motors  is shown below.  \n \nFigure 2. Method for converting the control signal into the motor command signals  \nSIMULATION  \nPlease find the simulation and template code at this address: \nhttps://wokwi.com/projects/327380710302155348  \n \nItem Purpose \nBlue LED Left Motor \nOrange LED Right Motor \nGreen LED Startup LED \nYellow LED Scanning LED \nRed LED Shutdown LED \nPotentiometer Angle Sensor \nTemplate Code Your starting point! \n \nNote:  \nThe power output of the left and right motors is shown by: \nBLACK arrow = LOW POWER \nPURPLE (VCC) arrow = HIGH POWER \nREFERENCE: PID CONTROLLERS  \nhttps://scholarscompass.vcu.edu/cgi/viewcontent.cgi?article=5737&context=etd \nhttps://www.omega.co.uk/prodinfo/pid-controllers.html \n \n100-100 Controller Signal\nLeft MotorRight Motor\n100%\n50%\n"}, {"page_number": 6, "text": " \n \n \n MECH1010: Computing For Engineers   P6 \nCOMPLETING THE COURSEWORK  \n \nHOW IS IT ASSESSED?  \nThe coursework is worth 50% of the overall Mech1010 module mark.  \nIt is designed to be completed individually, without any collaboration with other students. \n \nExpertise: The programming and skills required to complete this coursework relate directly to the learning objectives \nof this part of the module. They have been covered in the lecture and lab activities \u2013 please refer back to these for \nexamples. \n \n \n \nDeadline: Please see the deadline on Minerva  \n \nDeliverables: You must submit the following items through Minerva \u2013 correctly named \u2013to receive a mark \n\u2022 Each file named in this format:  username_mech1010_.XYZ \no A Flowchart PDF  username_mech1010.pdf   (Use the provided PPTX template!!) \no Arduino File:   username_mech1010.ino e.g. men18xyz_mech1010.ino) \no ReLOAD CSV Data  Original name   e.g. Experiment_1614027456688_data.csv \no ReLOAD Video   Original name   e.g. RELOA_15_Mar_2021_14_49_5722.mp4 \nCHECK: The ReLOAD Data files are unique to your username and will be checked against the ReLOAD Server \nPlease do not alter data-files or your submission will be investigated for plagiarism! \nMARK ALLOCATION  \nThe table below details how marks will be assigned for your project work. These are linked to the learning objectives that th is \ncoursework has been designed to assess. These are based on the material you have covered in the lectures, labs and self-study \nexercises, look back at your notes for examples and reminders! \n \nObjective Mark % \n1. Flow chart 15 \n2. Angle measurement 10 \n3. Controller implementation 15 \n4. Main auto-pilot program \na. Features \nb. Logic and Process \n25 \n(15) \n(10) \n5. Formatted telemetry data 10 \n6. Good programming practice 15 \n7. Performance of the controller 10 \n \nPLAGIARISM  \nYour code will be checked for plagiarism and malpractice \u2013 compared to other student\u2019s work.  \nPLEASE TAKE NOTE \u2013 COMPLETE THE COURSEWORK INDIVIDUALLY. DO NOT SHARE CODE OR DISCUSS YOUR SOLUTION!   "}, {"page_number": 7, "text": " \n \n \n MECH1010: Computing For Engineers   P7 \nAPPENDIX: DEVELOPING FLOWCHARTS TO SOLVE ENGINEERING PROBLEMS  \nFLOWCHARTS OVERVIEW  \nA flowchart is a graphical way to present a process or program. It describes the process fr om start to finish, \nincluding the key steps that need to be undertaken and any decision making and/or logic. Flowcharts are made up of a number o f \ndifferent shapes that represent specific actions; arrows between the shapes represent the flow of control through the process rather \nthan the flow of data.  \n \nCreating a flowchart is a good starting point when designing any kind of program or process as it can help define the archite cture \nof your code and pin-point issues early on in the design. \nFLOW CHART \u2013 MP3 SONG SHUFFLE EXAMPLE  \nAn example flowchart for a simple song shuffle program is shown in Figure 1. \nGo through it with just a few songs to see how it would \nfunction. Now consider: \n\u2022 Will this program do a suitable job of shuffling \nthe songs?  \n\u2022 How could it be altered to better fulfil the user\u2019s \nrequirements? \n(you\u2019ll do this example in Matlab, Semester 2 of Mech1010). \nDESIGNING A FLOW -CHART  \nWhen producing a flowchart follow these guidelines: \n\u2022 keep it easily readable \n\u2022 keep it concise (1 side A4)  \n\u2022 describe the key steps in the process \n\u2022 keep it general (e.g. avoid mentioning code / functions specific to \nMatlab/LabVIEW) \nDeveloping flow charts is an important skill. It allows you to breakdown, a nd \ndocuments, how to solve a large complex problem by performing a series of \nlogical, small steps. You (should!) use this approach throughout your degree.  \nBoth LabVIEW and MATLAB coursework assignments in MECH1010 will \nrequire the submission of a flowchart. \n  \nStart / Finish\nInput / Output \nData\nTalk + wave hands \nabout\nDecision\nConnections\nStart Tutorial\nEnd Tutorial\nDo students \nlook bored or \ninformed?\nAction\nYes\nNo\nStart program \nRead in song list \n(file) \nCount number of songs as \nvariable \u2018n; \nGenerate a random number, \n\u2018x\u2019 between 1 and n \nPick and store song number \u2018x\u2019 \nHave we \u2018n\u2019 \nsongs in list? \nOutput new song \nlist (file/screen) \nYes \nNo \n"}, {"page_number": 8, "text": " \n \n \n MECH1010: Computing For Engineers   P8 \n \nCHANGELOG  \nVersion Changes \nRevision 01 \u2013 27.03.2023 First release \u2013 basic information \nRevision 02 \u2013 01.04.2023 Pin connections for left and right motors (P3) \nAngle calibration information (P3) \nController speed reduced to 25Hz (P4) \nTemplate code and Simulation updated \nRevision 03 - 05.04.2023 Updated controller min and max limits (P3 Table 1.) \n  \n \n \n "}], "token_count": 1665}]}
